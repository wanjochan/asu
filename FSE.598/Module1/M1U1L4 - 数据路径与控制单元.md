

# 计算机系统设计：数据路径与控制单元内容精华

## 1. 指令执行的五个步骤
- **指令获取 (IF)**：PC → 指令内存取指令，PC ← PC + 4。
- **指令解码 (ID)**：读取寄存器数据。
- **执行 (EX)**：
  - 算术/逻辑：ALU 运算。
  - 加载/存储：计算地址。
  - 分支：计算目标地址。
- **内存访问 (MEM)**：加载读内存，存储写内存。
- **写回 (WB)**：结果写回寄存器（若需）。

**记忆**：FIDEM - Fetch, Instruction Decode, Execute, Memory, Write Back。

## 2. 处理器概念模型
- **PC**：指令地址。
- **指令内存**：存指令。
- **寄存器文件**：32 个寄存器，读 2 写 1。
- **ALU**：运算。
- **数据内存**：存数据。
- **控制单元**：生成控制信号。

## 3. 数据路径与内存交互
- **数据路径**：多路选择器、ALU、寄存器。
- **内存**：指令内存供指令，数据内存供读写。

## 4. 不同指令类型
- **R 型**：读 2 寄存器 → ALU → 写回。
- **加载/存储**：地址 = 基址 + 偏移量，加载 (内存 → 寄存器)，存储 (寄存器 → 内存)。
- **分支**：比较寄存器，若成立 PC ← PC + 4 + (偏移量 << 2)。

## 5. 控制信号
- 根据 opcode 生成，控制：
  - RegWrite：写寄存器。
  - ALUSrc：ALU 操作数来源。
  - MemRead/MemWrite：内存操作。
  - Branch：分支执行。

## 6. 关键细节
- PC + 4：指令 4 字节。
- 寄存器：5 位地址。
- 加载/存储：16 位偏移量符号扩展。
- 分支：偏移量 << 2 加 PC + 4。
- 单周期：1 指令 1 周期。

